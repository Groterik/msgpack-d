
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>msgpack</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("msgpack");</script>
	<table class="content">
		<tr><td id="docbody"><h1>msgpack</h1><!-- Generated by Ddoc from src/msgpack.d -->
MessagePack serializer and deserializer implementation.
<br><br>
MessagePack is a binary-based serialization specification.

<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=blue>auto</font> data = tuple(<font color=red>"MessagePack!"</font>, [1, 2], <font color=blue>true</font>);

<font color=blue>auto</font> serialized = pack(data);

<font color=green>// ...
</font>
<font color=blue>typeof</font>(data) deserialized;

unpack(serialized, deserialized);

<font color=blue>assert</font>(data == deserialized);
</pre>

<br><br>
<b>See Also:</b><br>
<a href="http://msgpack.org/">The MessagePack Project</a><br>
  <a href="http://wiki.msgpack.org/display/MSGPACK/Design+of+Serialization">MessagePack Design concept</a><br>
  <a href="http://wiki.msgpack.org/display/MSGPACK/Format+specification">MessagePack data format</a>

<br><br>
<b>License:</b><br>
<a href="http://www.boost.org/LICENSE_1_0.txt">Boost License 1.0</a>.
<br><br>
<b>Authors:</b><br>
Masahiro Nakagawa<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="pack"></a>ubyte[] 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(bool withFieldName = false, Args...)(in Args <span class="funcparam">args</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Serializes <i>args</i>.
<br><br>
Assumes single object if the length of <i>args</i> == 1,
 otherwise array object.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">Args args</td>

               
<td>the contents to serialize.</td></tr>
</table><br>
<b>Returns:</b><br>
a serialized data.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="unpack"></a>@trusted Unpacked 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(in ubyte[] <span class="funcparam">buffer</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Deserializes <i><span class="funcparam">buffer</span></i> using stream deserializer.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">ubyte[] <span class="funcparam">buffer</span></td>

               
<td>the <span class="funcparam">buffer</span> to deserialize.</td></tr>
</table><br>
<b>Returns:</b><br>
a <b>Unpacked</b>
 contains deserialized object.

<br><br>
<b>Throws:</b><br>
UnpackException if deserialization doesn't succeed.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="unpack"></a>void 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(bool withFieldName = false, Args...)(in ubyte[] <span class="funcparam">buffer</span>, ref Args <span class="funcparam">args</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Deserializes <i>buffer</i> using direct-conversion deserializer.
<br><br>
Assumes single object if the length of <i>args</i> == 1,
 otherwise array object.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">ubyte[] buffer</td>

               
<td>the buffer to deserialize.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">Args args</td>

               
<td>the references of values to assign.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="unpack"></a>Type 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(Type, bool withFieldName = false)(in ubyte[] <span class="funcparam">buffer</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Return value version<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="MessagePackException"></a>class 
<span class="currsymbol">MessagePackException</span>
<script>explorer.outline.addDecl('MessagePackException');</script>

: object.Exception;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>
<span class="currsymbol">MessagePackException</span>
<script>explorer.outline.addDecl('MessagePackException');</script>

</b>
 is a root Exception for MessagePack related operation.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="nonPacked"></a>struct 
<span class="currsymbol">nonPacked</span>
<script>explorer.outline.addDecl('nonPacked');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Attribute for specifying non pack/unpack field.
 This is an alternative approach of MessagePackable mixin.
<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=blue>struct</font> S
{
    <font color=blue>int</font> num;
    <font color=green>// Packer/Unpacker ignores this field;
</font>    @<u>nonPacked</u> string str;
}
</pre>
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="PackerImpl"></a>struct 
<span class="currsymbol">PackerImpl</span>
<script>explorer.outline.addDecl('PackerImpl');</script>

(Stream) if (isOutputRange!(Stream, ubyte) &amp;&amp; isOutputRange!(Stream, ubyte[]));
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>Packer</b>
 is a <b>MessagePack</b>
 serializer
<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=blue>auto</font> packer = packer(Appender!(<font color=blue>ubyte</font>[])());

packer.packArray(<font color=blue>false</font>, 100, 1e-10, <font color=blue>null</font>);

stdout.rawWrite(packer.buffer.data);
</pre>

<br><br>
<b>NOTE:</b><br>
Current implementation can't deal with a circular reference.
  If you try to serialize a object that has circular reference, runtime raises 'Stack Overflow'.<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="this"></a> this(Stream <span class="funcparam">stream</span>, bool <span class="funcparam">withFieldName</span> = false);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Constructs a packer with <i><span class="funcparam">stream</span></i>.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">Stream <span class="funcparam">stream</span></td>

               
<td>the <span class="funcparam">stream</span> to write.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">bool <span class="funcparam">withFieldName</span></td>

               
<td>serialize class / struct with field name</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="this"></a> this(bool <span class="funcparam">withFieldName</span> = false);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Constructs a packer with <i><span class="funcparam">withFieldName</span></i>.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">bool <span class="funcparam">withFieldName</span></td>

               
<td>serialize class / struct with field name</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="stream"></a>Stream 
<span class="currsymbol">stream</span>
<script>explorer.outline.addDecl('stream');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Forwards to 
<span class="currsymbol">stream</span>
<script>explorer.outline.addDecl('stream');</script>

.
<br><br>
<b>Returns:</b><br>
the 
<span class="currsymbol">stream</span>
<script>explorer.outline.addDecl('stream');</script>

.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">value</span>) if (is(Unqual!T == bool));
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">value</span>) if (isUnsigned!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">value</span>) if (isSigned!T &amp;&amp; isIntegral!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">value</span>) if (isFloatingPoint!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">value</span>) if (is(Unqual!T == enum));
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Serializes argument and writes to stream.
<br><br>
If the argument is the pointer type, dereferences the pointer and serializes pointed value.
<pre class="d_code"><font color=blue>int</font>  a = 10;
<font color=blue>int</font>* b = &amp;b;

packer.<u>pack</u>(b);  <font color=green>// serializes 10, not address of a
</font></pre>
 Serializes nil if the argument of nullable type is <b>null</b>.

<br><br>
<b>NOTE:</b><br>
MessagePack doesn't define <font color=blue>real</font> type format.
  Don't serialize <font color=blue>real</font> if you communicate with other languages.
  Transfer <font color=blue>double</font> serialization if <font color=blue>real</font> on your environment equals <font color=blue>double</font>.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">T value</td>

               
<td>the content to serialize.</td></tr>
</table><br>
<b>Returns:</b><br>
self, i.e. for method chaining.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">value</span>) if (is(Unqual!T == typeof(null)));
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">value</span>) if (isPointer!T);
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">array</span>) if (isArray!T);
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">array</span>) if (isAssociativeArray!T);
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(Types...)(auto ref const Types <span class="funcparam">objects</span>) if (Types.length &gt; 1);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Overload for 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(<b>null</b>) for 2.057 or later<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(in T <span class="funcparam">object</span>) if (is(Unqual!T == class));
<br><a name="pack"></a>PackerImpl 
<span class="currsymbol">pack</span>
<script>explorer.outline.addDecl('pack');</script>

(T)(auto ref T <span class="funcparam">object</span>) if (is(Unqual!T == struct));
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Serializes <i>object</i> and writes to stream.
<br><br>
Calling <b>toMsgpack</b>
 if <font color=blue>class</font> and <font color=blue>struct</font> implement <b>toMsgpack</b>
 method. <b>toMsgpack</b>
 signature is:
<pre class="d_code"><font color=blue>void</font> toMsgpack(Packer)(<font color=blue>ref</font> Packer packer) <font color=blue>const</font>
</pre>
 This method serializes all members of T object if <font color=blue>class</font> and <font color=blue>struct</font> don't implement <b>toMsgpack</b>
.
<br><br>

 An object that doesn't implement <b>toMsgpack</b>
 is serialized to Array type.
<pre class="d_code">packer.<u>pack</u>(tuple(<font color=blue>true</font>, 1, <font color=red>"Hi!"</font>))  <font color=green>// -&gt; '[true, 1, "Hi!"]', not 'ture, 1, "Hi!"'
</font>
<font color=blue>struct</font> Foo
{
    <font color=blue>int</font> num    = 10;
    string msg = <font color=red>"D!"</font>;
}
packer.<u>pack</u>(Foo());  <font color=green>// -&gt; '[10, "D!"]'
</font>
<font color=blue>class</font> Base
{
    <font color=blue>bool</font> flag = <font color=blue>true</font>;
}
<font color=blue>class</font> Derived : Base
{
    <font color=blue>double</font> = 0.5f;
}
packer.<u>pack</u>(<font color=blue>new</font> Derived());  <font color=green>// -&gt; '[true, 0.5f]'
</font></pre>

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">T object</td>

               
<td>the content to serialize.</td></tr>
</table><br>
<b>Returns:</b><br>
self, i.e. for method chaining.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="packArray"></a>PackerImpl 
<span class="currsymbol">packArray</span>
<script>explorer.outline.addDecl('packArray');</script>

(Types...)(auto ref const Types <span class="funcparam">objects</span>);
<br><a name="packMap"></a>PackerImpl 
<span class="currsymbol">packMap</span>
<script>explorer.outline.addDecl('packMap');</script>

(Types...)(auto ref const Types <span class="funcparam">objects</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Serializes the arguments as container to stream.
<br><br>
<pre class="d_code">packer.<u>packArray</u>(<font color=blue>true</font>, 1);  <font color=green>// -&gt; [true, 1]
</font>packer.packMap(<font color=red>"Hi"</font>, 100);  <font color=green>// -&gt; ["Hi":100]
</font></pre>
<br><br>

 In packMap, the number of arguments must be even.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">Types objects</td>

               
<td>the contents to serialize.</td></tr>
</table><br>
<b>Returns:</b><br>
self, i.e. for method chaining.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="beginArray"></a>PackerImpl 
<span class="currsymbol">beginArray</span>
<script>explorer.outline.addDecl('beginArray');</script>

(in size_t <span class="funcparam">length</span>);
<br><a name="beginMap"></a>PackerImpl 
<span class="currsymbol">beginMap</span>
<script>explorer.outline.addDecl('beginMap');</script>

(in size_t <span class="funcparam">length</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Serializes the type-information to stream.
<br><br>
These methods don't serialize contents.
 You need to call pack method to serialize contents at your own risk.
<pre class="d_code">packer.<u>beginArray</u>(3).pack(<font color=blue>true</font>, 1);  <font color=green>// -&gt; [true, 1,
</font>
<font color=green>// other operation
</font>
packer.pack(<font color=red>"Hi!"</font>);                  <font color=green>// -&gt; [true, 1, "Hi!"]
</font></pre>

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">size_t <span class="funcparam">length</span></td>

               
<td>the <span class="funcparam">length</span> of container.</td></tr>
</table><br>
<b>Returns:</b><br>
self, i.e. for method chaining.<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Packer"></a>alias 
<span class="currsymbol">Packer</span>
<script>explorer.outline.addDecl('Packer');</script>

 = PackerImpl!(Appender!(ubyte[])).PackerImpl;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Default serializer<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="registerPackHandler"></a>void 
<span class="currsymbol">registerPackHandler</span>
<script>explorer.outline.addDecl('registerPackHandler');</script>

(T, alias Handler, Stream = Appender!(ubyte[]))();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Register a serialization handler for <i>T</i> type
<br><br>
<b>Example:</b><br>
<pre class="d_code"><u>registerPackHandler</u>!(Foo, fooPackHandler);
</pre>
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="packer"></a>PackerImpl!Stream 
<span class="currsymbol">packer</span>
<script>explorer.outline.addDecl('packer');</script>

(Stream)(Stream <span class="funcparam">stream</span>, bool <span class="funcparam">withFieldName</span> = false);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Helper for <b>Packer</b>
 construction.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">Stream stream</td>

               
<td>the stream to write.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">bool withFieldName</td>

               
<td>serialize class / struct with field name</td></tr>
</table><br>
<b>Returns:</b><br>
a <b>Packer</b>
 object instantiated and initialized according to the arguments.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="RefBuffer"></a>struct 
<span class="currsymbol">RefBuffer</span>
<script>explorer.outline.addDecl('RefBuffer');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>
<span class="currsymbol">RefBuffer</span>
<script>explorer.outline.addDecl('RefBuffer');</script>

</b>
 is a reference stored buffer for more efficient serialization
<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=blue>auto</font> packer = packer(<u>RefBuffer</u>(16));  <font color=green>// threshold is 16
</font>
<font color=green>// packs data
</font>
writev(fd, <font color=blue>cast</font>(<font color=blue>void</font>*)packer.buffer.vector.ptr, packer.buffer.vector.length);
</pre>
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="RefBuffer.this"></a> this(in size_t <span class="funcparam">threshold</span>, in size_t <span class="funcparam">chunkSize</span> = 8192);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Constructs a buffer.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">size_t <span class="funcparam">threshold</span></td>

               
<td>the <span class="funcparam">threshold</span> of writing value or stores reference.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">size_t <span class="funcparam">chunkSize</span></td>

               
<td>the default size of chunk for allocation.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="RefBuffer.data"></a>nothrow @property @safe ubyte[] 
<span class="currsymbol">data</span>
<script>explorer.outline.addDecl('data');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Returns the buffer contents that excluding references.
<br><br>
<b>Returns:</b><br>
the non-contiguous copied contents.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="RefBuffer.vector"></a>nothrow @property ref @safe iovec[] 
<span class="currsymbol">vector</span>
<script>explorer.outline.addDecl('vector');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Forwards to all buffer contents.
<br><br>
<b>Returns:</b><br>
the array of iovec struct that stores references.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="RefBuffer.put"></a>@safe void 
<span class="currsymbol">put</span>
<script>explorer.outline.addDecl('put');</script>

(in ubyte <span class="funcparam">value</span>);
<br><a name="RefBuffer.put"></a>@safe void 
<span class="currsymbol">put</span>
<script>explorer.outline.addDecl('put');</script>

(in ubyte[] <span class="funcparam">value</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Writes the argument to buffer and stores the reference of writed content
 if the argument size is smaller than threshold,
 otherwise stores the reference of argument directly.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">ubyte <span class="funcparam">value</span></td>

               
<td>the content to write.</td></tr>
</table><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="UnpackException"></a>class 
<span class="currsymbol">UnpackException</span>
<script>explorer.outline.addDecl('UnpackException');</script>

: msgpack.MessagePackException;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>
<span class="currsymbol">UnpackException</span>
<script>explorer.outline.addDecl('UnpackException');</script>

</b>
 is thrown on deserialization failure<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="InternalBuffer"></a>template 
<span class="currsymbol">InternalBuffer</span>
<script>explorer.outline.addDecl('InternalBuffer');</script>

()</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Internal buffer and related operations for Unpacker
<br><br>
Following Unpackers mixin this template. So, Unpacker can use following methods.
<br><br>

<pre class="d_code"><font color=green>//buffer image:
</font>+-------------------------------------------+
| [object] | [obj | unparsed... | unused... |
+-------------------------------------------+
           ^ offset
                  ^ current
                                ^ used
                                            ^ buffer.length
</pre>
<br><br>

 This mixin template is a private.<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="buffer"></a>ubyte[] 
<span class="currsymbol">buffer</span>
<script>explorer.outline.addDecl('buffer');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Forwards to internal 
<span class="currsymbol">buffer</span>
<script>explorer.outline.addDecl('buffer');</script>

.
<br><br>
<b>Returns:</b><br>
the reference of internal 
<span class="currsymbol">buffer</span>
<script>explorer.outline.addDecl('buffer');</script>

.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="feed"></a>void 
<span class="currsymbol">feed</span>
<script>explorer.outline.addDecl('feed');</script>

(in ubyte[] <span class="funcparam">target</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Fills internal buffer with <i><span class="funcparam">target</span></i>.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">ubyte[] <span class="funcparam">target</span></td>

               
<td>new serialized buffer to deserialize.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="bufferConsumed"></a>void 
<span class="currsymbol">bufferConsumed</span>
<script>explorer.outline.addDecl('bufferConsumed');</script>

(in size_t <span class="funcparam">size</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Consumes buffer. This method is helper for buffer property.
 You must use this method if you write bytes to buffer directly.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">size_t <span class="funcparam">size</span></td>

               
<td>the number of consuming.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="removeUnparsed"></a>void 
<span class="currsymbol">removeUnparsed</span>
<script>explorer.outline.addDecl('removeUnparsed');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Removes unparsed buffer.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="size"></a>const size_t 
<span class="currsymbol">size</span>
<script>explorer.outline.addDecl('size');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>Returns:</b><br>
the total 
<span class="currsymbol">size</span>
<script>explorer.outline.addDecl('size');</script>

 including unparsed buffer 
<span class="currsymbol">size</span>
<script>explorer.outline.addDecl('size');</script>

.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="parsedSize"></a>const size_t 
<span class="currsymbol">parsedSize</span>
<script>explorer.outline.addDecl('parsedSize');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>Returns:</b><br>
the parsed size of buffer.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="unparsedSize"></a>const size_t 
<span class="currsymbol">unparsedSize</span>
<script>explorer.outline.addDecl('unparsedSize');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>Returns:</b><br>
the unparsed size of buffer.<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker"></a>struct 
<span class="currsymbol">Unpacker</span>
<script>explorer.outline.addDecl('Unpacker');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>This <b>
<span class="currsymbol">Unpacker</span>
<script>explorer.outline.addDecl('Unpacker');</script>

</b>
 is a <b>MessagePack</b>
 direct-conversion deserializer
<br><br>
This implementation is suitable for fixed data.

<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=green>// serializedData is [10, 0.1, false]
</font><font color=blue>auto</font> unpacker = <u>Unpacker</u>(serializedData);

<font color=blue>uint</font>   n;
<font color=blue>double</font> d;
<font color=blue>bool</font>   b;

unpacker.unpackArray(n, d, b);

<font color=green>// using Tuple
</font>Tuple!(<font color=blue>uint</font>, <font color=blue>double</font>, <font color=blue>bool</font>) record;
unpacker.unpack(record);  <font color=green>// record is [10, 0.1, false]
</font></pre>

<br><br>
<b>NOTE:</b><br>

<span class="currsymbol">Unpacker</span>
<script>explorer.outline.addDecl('Unpacker');</script>

 becomes template struct if Phobos supports truly IO module.<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker.this"></a> this(in ubyte[] <span class="funcparam">target</span>, in size_t <span class="funcparam">bufferSize</span> = 8192, bool <span class="funcparam">withFieldName</span> = false);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Constructs a <b>Unpacker</b>
.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">ubyte[] <span class="funcparam">target</span></td>

               
<td>byte buffer to deserialize</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">size_t <span class="funcparam">bufferSize</span></td>

               
<td>size limit of buffer size</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker.clear"></a>nothrow @safe void 
<span class="currsymbol">clear</span>
<script>explorer.outline.addDecl('clear');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Clears states for next deserialization.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(ref T <span class="funcparam">value</span>) if (is(Unqual!T == bool));
<br><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(ref T <span class="funcparam">value</span>) if (isUnsigned!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(ref T <span class="funcparam">value</span>) if (isSigned!T &amp;&amp; isIntegral!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(ref T <span class="funcparam">value</span>) if (isFloatingPoint!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(ref T <span class="funcparam">value</span>) if (is(Unqual!T == enum));
<br><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(T <span class="funcparam">value</span>) if (isPointer!T);
<br><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(Types...)(ref Types <span class="funcparam">objects</span>) if (Types.length &gt; 1);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Deserializes <i>T</i> object and assigns to <i>value</i>.
<br><br>
If the argument is pointer, dereferences pointer and assigns deserialized value.
<pre class="d_code"><font color=blue>int</font>* a;
unpacker.<u>unpack</u>(a)  <font color=green>// enforce throws Exception because a is null or
</font>                    <font color=green>// no throw if deserialized value is nil
</font>
<font color=blue>int</font> b; a = &amp;b;
unpacker.<u>unpack</u>(b)  <font color=green>// b is deserialized value or
</font>                    <font color=green>// assigns null if deserialized value is nil
</font></pre>

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">T value</td>

               
<td>the reference of value to assign.</td></tr>
</table><br>
<b>Returns:</b><br>
self, i.e. for method chaining.

<br><br>
<b>Throws:</b><br>
UnpackException when doesn't read from buffer or precision loss occurs and
  MessagePackException when <i>T</i> type doesn't match serialized type.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(ref T <span class="funcparam">array</span>) if (isArray!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(ref T <span class="funcparam">array</span>) if (isAssociativeArray!T);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Deserializes <i>T</i> object and assigns to <i>array</i>.
<br><br>
This is convenient method for array deserialization.
 Rollback will be completely successful if you deserialize raw type((u)byte[] or string types).
 But, Rollback will be one element(e.g. int) if you deserialize other types(e.g. int[], int[int])
<br><br>

 No assign if the length of deserialized object is 0.
<br><br>

 In a static array, this method checks the length. Do rollback and throw exception
 if length of <i>array</i> is different from length of deserialized object.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">T array</td>

               
<td>the reference of array to assign.</td></tr>
</table><br>
<b>Returns:</b><br>
self, i.e. for method chaining.

<br><br>
<b>Throws:</b><br>
UnpackException when doesn't read from buffer or precision loss occurs and
  MessagePackException when <i>T</i> type doesn't match serialized type.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T, Args...)(ref T <span class="funcparam">object</span>, auto ref Args <span class="funcparam">args</span>) if (is(Unqual!T == class));
<br><a name="Unpacker.unpack"></a>Unpacker 
<span class="currsymbol">unpack</span>
<script>explorer.outline.addDecl('unpack');</script>

(T)(ref T <span class="funcparam">object</span>) if (is(Unqual!T == struct));
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Deserializes <i>T</i> object and assigns to <i>object</i>.
<br><br>
Calling <b>fromMsgpack</b>
 if <font color=blue>class</font> and <font color=blue>struct</font> implement <b>fromMsgpack</b>
 method. <b>fromMsgpack</b>
 signature is:
<pre class="d_code"><font color=blue>void</font> fromMsgpack(<font color=blue>ref</font> Unpacker unpacker)
</pre>
 Assumes <b>std.typecons.Tuple</b>
 or simple struct if <font color=blue>struct</font> doesn't implement <b>fromMsgpack</b>
.
 Checks length if <i>T</i> is a <b>std.typecons.Tuple</b>
 or simple struct.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">T object</td>

               
<td>the reference of object to assign.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">Args args</td>

               
<td>the arguments to class constructor(class only).
           This is used at new statement if <i>object</i> is <font color=blue><b>null</b></font>.</td></tr>
</table><br>
<b>Returns:</b><br>
self, i.e. for method chaining.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker.unpackArray"></a>Unpacker 
<span class="currsymbol">unpackArray</span>
<script>explorer.outline.addDecl('unpackArray');</script>

(Types...)(ref Types <span class="funcparam">objects</span>);
<br><a name="Unpacker.unpackMap"></a>Unpacker 
<span class="currsymbol">unpackMap</span>
<script>explorer.outline.addDecl('unpackMap');</script>

(Types...)(ref Types <span class="funcparam">objects</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Deserializes the container object and assigns to each argument.
<br><br>
These methods check the length. Do rollback if
 the length of arguments is different from length of deserialized object.
<br><br>

 In unpackMap, the number of arguments must be even.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">Types objects</td>

               
<td>the references of object to assign.</td></tr>
</table><br>
<b>Returns:</b><br>
self, i.e. for method chaining.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker.beginArray"></a>@safe size_t 
<span class="currsymbol">beginArray</span>
<script>explorer.outline.addDecl('beginArray');</script>

();
<br><a name="Unpacker.beginMap"></a>@safe size_t 
<span class="currsymbol">beginMap</span>
<script>explorer.outline.addDecl('beginMap');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Deserializes the type-information of container.
<br><br>
These methods don't deserialize contents.
 You need to call unpack method to deserialize contents at your own risk.
<pre class="d_code"><font color=green>// serialized data is [1, "Hi!"];
</font><font color=blue>int</font> num;
unpacker.<u>beginArray</u>(2).unpack(num);  <font color=green>// num is 1
</font>
<font color=green>// other operation
</font>
string str;
unpacker.unpack(str);  <font color=green>// str is "Hi!"
</font></pre>

<br><br>
<b>Returns:</b><br>
the container size.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacker.scan"></a>int 
<span class="currsymbol">scan</span>
<script>explorer.outline.addDecl('scan');</script>

(Types...)(scope int delegate(ref Types) <span class="funcparam">dg</span>);
<br><a name="Unpacker.opApply"></a>int 
<span class="currsymbol">opApply</span>
<script>explorer.outline.addDecl('opApply');</script>

(Types...)(scope int delegate(ref Types) <span class="funcparam">dg</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Scans an entire buffer and converts each objects.
<br><br>
This method is used for unpacking record-like objects.

<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=green>// serialized data is "[1, 2][3, 4][5, 6][...".
</font><font color=blue>auto</font> unpacker = Unpacker(serializedData);
<font color=blue>foreach</font> (n, d; &amp;unpacker.<u>scan</u>!(<font color=blue>int</font>, <font color=blue>int</font>))  <font color=green>// == "foreach (int n, int d; unpacker)"
</font>    writeln(n, d); <font color=green>// 1st loop "1, 2", 2nd loop "3, 4"...
</font></pre>
<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="registerUnpackHandler"></a>void 
<span class="currsymbol">registerUnpackHandler</span>
<script>explorer.outline.addDecl('registerUnpackHandler');</script>

(T, alias Handler)();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Register a deserialization handler for <i>T</i> type
<br><br>
<b>Example:</b><br>
<pre class="d_code">registerUnackHandler!(Foo, fooUnackHandler);
</pre>
<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value"></a>struct 
<span class="currsymbol">Value</span>
<script>explorer.outline.addDecl('Value');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>
<span class="currsymbol">Value</span>
<script>explorer.outline.addDecl('Value');</script>

</b>
 is a <b>MessagePack</b>
 value representation
<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=blue>auto</font> unpacker = StreamingUnpacker(pack(1, 0.1L) ~ pack(<font color=blue>true</font>) ~ pack(<font color=red>"foobarbaz"</font>));

<font color=blue>foreach</font> (unpacked; unpacker) {
    <font color=blue>if</font> (unpacked.type == <u>Value</u>.Type.array) {
        <font color=blue>foreach</font> (obj; unpacked) {
            <font color=blue>switch</font> (obj.type) {
            <font color=blue>case</font> <u>Value</u>.Type.unsigned: writeln(obj.as!(<font color=blue>uint</font>)); <font color=blue>break</font>;
            <font color=blue>case</font> <u>Value</u>.Type.floating:            writeln(obj.as!(<font color=blue>real</font>)); <font color=blue>break</font>;
            defalut:
                <font color=blue>throw</font> <font color=blue>new</font> Exception(<font color=red>"Unknown type"</font>);
            }
        }
    } <font color=blue>else</font> {
        <font color=blue>if</font> (unpacked.type == <u>Value</u>.Type.boolean)
            writeln(unpacked.as!(<font color=blue>bool</font>));
        <font color=blue>else</font>
            writeln(<font color=red>"Message: "</font>, unpacked.as!(string));
    }
}
</pre>
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type"></a>enum 
<span class="currsymbol">Type</span>
<script>explorer.outline.addDecl('Type');</script>

: int;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>MessagePack</b>
 value type<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type.nil"></a>
<span class="currsymbol">nil</span>
<script>explorer.outline.addDecl('nil');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>
<span class="currsymbol">nil</span>
<script>explorer.outline.addDecl('nil');</script>

(<b>null</b> in D)<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type.boolean"></a>
<span class="currsymbol">boolean</span>
<script>explorer.outline.addDecl('boolean');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>true</b>, <b>false</b><br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type.unsigned"></a>
<span class="currsymbol">unsigned</span>
<script>explorer.outline.addDecl('unsigned');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>positive fixnum, uint 8, uint 16, uint 32, uint 64<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type.signed"></a>
<span class="currsymbol">signed</span>
<script>explorer.outline.addDecl('signed');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>negative fixnum, int 8, int 16, int 32, int 64<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type.floating"></a>
<span class="currsymbol">floating</span>
<script>explorer.outline.addDecl('floating');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>float, double, real<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type.array"></a>
<span class="currsymbol">array</span>
<script>explorer.outline.addDecl('array');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>fix 
<span class="currsymbol">array</span>
<script>explorer.outline.addDecl('array');</script>

, 
<span class="currsymbol">array</span>
<script>explorer.outline.addDecl('array');</script>

 16, 
<span class="currsymbol">array</span>
<script>explorer.outline.addDecl('array');</script>

 32<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type.map"></a>
<span class="currsymbol">map</span>
<script>explorer.outline.addDecl('map');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>fix 
<span class="currsymbol">map</span>
<script>explorer.outline.addDecl('map');</script>

, 
<span class="currsymbol">map</span>
<script>explorer.outline.addDecl('map');</script>

 16, 
<span class="currsymbol">map</span>
<script>explorer.outline.addDecl('map');</script>

 32<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Type.raw"></a>
<span class="currsymbol">raw</span>
<script>explorer.outline.addDecl('raw');</script>

</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>fix 
<span class="currsymbol">raw</span>
<script>explorer.outline.addDecl('raw');</script>

, 
<span class="currsymbol">raw</span>
<script>explorer.outline.addDecl('raw');</script>

 16, 
<span class="currsymbol">raw</span>
<script>explorer.outline.addDecl('raw');</script>

 32<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Via"></a>union 
<span class="currsymbol">Via</span>
<script>explorer.outline.addDecl('Via');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>msgpack value representation<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Via.boolean"></a>bool 
<span class="currsymbol">boolean</span>
<script>explorer.outline.addDecl('boolean');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>corresponding to Type.
<span class="currsymbol">boolean</span>
<script>explorer.outline.addDecl('boolean');</script>

<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Via.uinteger"></a>ulong 
<span class="currsymbol">uinteger</span>
<script>explorer.outline.addDecl('uinteger');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>corresponding to Type.unsigned<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Via.integer"></a>long 
<span class="currsymbol">integer</span>
<script>explorer.outline.addDecl('integer');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>corresponding to Type.signed<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Via.floating"></a>real 
<span class="currsymbol">floating</span>
<script>explorer.outline.addDecl('floating');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>corresponding to Type.
<span class="currsymbol">floating</span>
<script>explorer.outline.addDecl('floating');</script>

<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Via.array"></a>Value[] 
<span class="currsymbol">array</span>
<script>explorer.outline.addDecl('array');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>corresponding to Type.
<span class="currsymbol">array</span>
<script>explorer.outline.addDecl('array');</script>

<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Via.map"></a>Value[Value] 
<span class="currsymbol">map</span>
<script>explorer.outline.addDecl('map');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>corresponding to Type.
<span class="currsymbol">map</span>
<script>explorer.outline.addDecl('map');</script>

<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.Via.raw"></a>ubyte[] 
<span class="currsymbol">raw</span>
<script>explorer.outline.addDecl('raw');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>corresponding to Type.
<span class="currsymbol">raw</span>
<script>explorer.outline.addDecl('raw');</script>

<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.type"></a>Type 
<span class="currsymbol">type</span>
<script>explorer.outline.addDecl('type');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>represents value 
<span class="currsymbol">type</span>
<script>explorer.outline.addDecl('type');</script>

<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.via"></a>Via 
<span class="currsymbol">via</span>
<script>explorer.outline.addDecl('via');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>represents real value<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.this"></a> this(Type <span class="funcparam">type</span> = Type.nil);
<br><a name="Value.this"></a> this(bool <span class="funcparam">value</span>, Type <span class="funcparam">type</span> = Type.boolean);
<br><a name="Value.this"></a> this(ulong <span class="funcparam">value</span>, Type <span class="funcparam">type</span> = Type.unsigned);
<br><a name="Value.this"></a> this(long <span class="funcparam">value</span>, Type <span class="funcparam">type</span> = Type.signed);
<br><a name="Value.this"></a> this(real <span class="funcparam">value</span>, Type <span class="funcparam">type</span> = Type.floating);
<br><a name="Value.this"></a> this(Value[] <span class="funcparam">value</span>, Type <span class="funcparam">type</span> = Type.array);
<br><a name="Value.this"></a> this(Value[Value] <span class="funcparam">value</span>, Type <span class="funcparam">type</span> = Type.map);
<br><a name="Value.this"></a> this(ubyte[] <span class="funcparam">value</span>, Type <span class="funcparam">type</span> = Type.raw);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Constructs a <b>Value</b>
 with arguments.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">value</td>

               
<td>the real content.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">Type <span class="funcparam">type</span></td>

               
<td>the <span class="funcparam">type</span> of value.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.this"></a> this(string <span class="funcparam">value</span>, Type <span class="funcparam">type</span> = Type.raw);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>This is unsafe overload because using cast internally.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.as"></a>T 
<span class="currsymbol">as</span>
<script>explorer.outline.addDecl('as');</script>

(T)() if (is(Unqual!T == bool));
<br><a name="Value.as"></a>T 
<span class="currsymbol">as</span>
<script>explorer.outline.addDecl('as');</script>

(T)() if (isIntegral!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="Value.as"></a>T 
<span class="currsymbol">as</span>
<script>explorer.outline.addDecl('as');</script>

(T)() if (isFloatingPoint!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="Value.as"></a>T 
<span class="currsymbol">as</span>
<script>explorer.outline.addDecl('as');</script>

(T)() if (is(Unqual!T == enum));
<br><a name="Value.as"></a>T 
<span class="currsymbol">as</span>
<script>explorer.outline.addDecl('as');</script>

(T)() if (isArray!T &amp;&amp; !is(Unqual!T == enum));
<br><a name="Value.as"></a>T 
<span class="currsymbol">as</span>
<script>explorer.outline.addDecl('as');</script>

(T)() if (isAssociativeArray!T);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Converts value to <i>T</i> type.
<br><br>
<b>Returns:</b><br>
converted value.

<br><br>
<b>Throws:</b><br>
MessagePackException if type is mismatched.

<br><br>
<b>NOTE:</b><br>
Current implementation uses cast.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.as"></a>T 
<span class="currsymbol">as</span>
<script>explorer.outline.addDecl('as');</script>

(T, Args...)(Args <span class="funcparam">args</span>) if (is(Unqual!T == class));
<br><a name="Value.as"></a>T 
<span class="currsymbol">as</span>
<script>explorer.outline.addDecl('as');</script>

(T)() if (is(Unqual!T == struct));
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Converts to <i>T</i> type.
<br><br>
Calling <b>fromMsgpack</b>
 if <font color=blue>class</font> and <font color=blue>struct</font> implement <b>fromMsgpack</b>
 method. <b>fromMsgpack</b>
 signature is:
<pre class="d_code"><font color=blue>void</font> fromMsgpack(Value value)
</pre>
 This method assigns converted values to all members of T object if <font color=blue>class</font> and <font color=blue>struct</font> don't implement <b>fromMsgpack</b>
.

<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">Args args</td>

               
<td>arguments to class constructor(class only).</td></tr>
</table><br>
<b>Returns:</b><br>
converted value.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.toMsgpack"></a>const void 
<span class="currsymbol">toMsgpack</span>
<script>explorer.outline.addDecl('toMsgpack');</script>

(Packer)(ref Packer <span class="funcparam">packer</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Special method called by <b>Packer</b>
.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">Packer packer</td>

               
<td>a MessagePack serializer.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Value.opEquals"></a>const bool 
<span class="currsymbol">opEquals</span>
<script>explorer.outline.addDecl('opEquals');</script>

(Tdummy = void)(ref const Value <span class="funcparam">other</span>);
<br><a name="Value.opEquals"></a>const bool 
<span class="currsymbol">opEquals</span>
<script>explorer.outline.addDecl('opEquals');</script>

(T : bool)(in T <span class="funcparam">other</span>);
<br><a name="Value.opEquals"></a>const bool 
<span class="currsymbol">opEquals</span>
<script>explorer.outline.addDecl('opEquals');</script>

(T : ulong)(in T <span class="funcparam">other</span>);
<br><a name="Value.opEquals"></a>const bool 
<span class="currsymbol">opEquals</span>
<script>explorer.outline.addDecl('opEquals');</script>

(T : real)(in T <span class="funcparam">other</span>);
<br><a name="Value.opEquals"></a>const bool 
<span class="currsymbol">opEquals</span>
<script>explorer.outline.addDecl('opEquals');</script>

(T : const(Value[]))(in T <span class="funcparam">other</span>);
<br><a name="Value.opEquals"></a>const bool 
<span class="currsymbol">opEquals</span>
<script>explorer.outline.addDecl('opEquals');</script>

(T : const(Value[Value]))(in T <span class="funcparam">other</span>);
<br><a name="Value.opEquals"></a>const bool 
<span class="currsymbol">opEquals</span>
<script>explorer.outline.addDecl('opEquals');</script>

(T : const(ubyte)[])(in T <span class="funcparam">other</span>);
<br><a name="Value.opEquals"></a>const bool 
<span class="currsymbol">opEquals</span>
<script>explorer.outline.addDecl('opEquals');</script>

(T : string)(in T <span class="funcparam">other</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Comparison for equality. @trusted for union.<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked"></a>struct 
<span class="currsymbol">Unpacked</span>
<script>explorer.outline.addDecl('Unpacked');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd><b>
<span class="currsymbol">Unpacked</span>
<script>explorer.outline.addDecl('Unpacked');</script>

</b>
 is a <b>Range</b>
 wrapper for stream deserialization result<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.value"></a>Value 
<span class="currsymbol">value</span>
<script>explorer.outline.addDecl('value');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>deserialized 
<span class="currsymbol">value</span>
<script>explorer.outline.addDecl('value');</script>

<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.this"></a> this(ref Value <span class="funcparam">value</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Constructs a <b>Unpacked</b>
 with argument.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">Value <span class="funcparam">value</span></td>

               
<td>a deserialized <span class="funcparam">value</span>.</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.empty"></a>const nothrow @property @trusted bool 
<span class="currsymbol">empty</span>
<script>explorer.outline.addDecl('empty');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>InputRange primitive operation that checks iteration state.
<br><br>
<b>Returns:</b><br>
<b>true</b> if there are no more elements to be iterated.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.length"></a>@property @trusted size_t 
<span class="currsymbol">length</span>
<script>explorer.outline.addDecl('length');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Range primitive operation that returns the 
<span class="currsymbol">length</span>
<script>explorer.outline.addDecl('length');</script>

 of the range.
<br><br>
<b>Returns:</b><br>
the number of values.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.front"></a>@property ref @trusted Value 
<span class="currsymbol">front</span>
<script>explorer.outline.addDecl('front');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>InputRange primitive operation that returns the currently iterated element.
<br><br>
<b>Returns:</b><br>
the deserialized <b>Value</b>
.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.popFront"></a>@trusted void 
<span class="currsymbol">popFront</span>
<script>explorer.outline.addDecl('popFront');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>InputRange primitive operation that advances the range to its next element.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.opIndex"></a>nothrow ref @trusted Value 
<span class="currsymbol">opIndex</span>
<script>explorer.outline.addDecl('opIndex');</script>

(size_t <span class="funcparam">n</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>RandomAccessRange primitive operation.
<br><br>
<b>Returns:</b><br>
the deserialized <b>Value</b>
 at <i><span class="funcparam">n</span></i> position.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.opSlice"></a>@trusted Value[] 
<span class="currsymbol">opSlice</span>
<script>explorer.outline.addDecl('opSlice');</script>

(size_t <span class="funcparam">from</span>, size_t <span class="funcparam">to</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Returns a slice of the range.
<br><br>
<b>Paramas:</b><br>
<span class="funcparam">from</span> = the start point of slicing.
  <span class="funcparam">to</span>   = the end point of slicing.

<br><br>
<b>Returns:</b><br>
the slice of Values.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="Unpacked.save"></a>@property @safe Unpacked 
<span class="currsymbol">save</span>
<script>explorer.outline.addDecl('save');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Range primitive operation that returns the snapshot.
<br><br>
<b>Returns:</b><br>
the snapshot of this Value.<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="StreamingUnpacker"></a>struct 
<span class="currsymbol">StreamingUnpacker</span>
<script>explorer.outline.addDecl('StreamingUnpacker');</script>

;
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>This <b>
<span class="currsymbol">StreamingUnpacker</span>
<script>explorer.outline.addDecl('StreamingUnpacker');</script>

</b>
 is a <b>MessagePack</b>
 streaming deserializer
<br><br>
This implementation enables you to load multiple objects from a stream(like network).

<br><br>
<b>Example:</b><br>
<pre class="d_code">...
<font color=blue>auto</font> unpacker = <u>StreamingUnpacker</u>(serializedData);
...

<font color=green>// appends new data to buffer if pre execute() call didn't finish deserialization.
</font>unpacker.feed(newSerializedData);

<font color=blue>while</font> (unpacker.execute()) {
    <font color=blue>foreach</font> (obj; unpacker.purge()) {
        <font color=green>// do stuff (obj is a Value)
</font>    }
}

<font color=blue>if</font> (unpacker.size)
    <font color=blue>throw</font> <font color=blue>new</font> Exception(<font color=red>"Message is too large"</font>);
</pre>
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="StreamingUnpacker.this"></a> this(in ubyte[] <span class="funcparam">target</span>, in size_t <span class="funcparam">bufferSize</span> = 8192);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Constructs a <b>StreamingUnpacker</b>
.
<br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">ubyte[] <span class="funcparam">target</span></td>

               
<td>byte buffer to deserialize</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">size_t <span class="funcparam">bufferSize</span></td>

               
<td>size limit of buffer size</td></tr>
</table><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="StreamingUnpacker.unpacked"></a>@property @safe Unpacked 
<span class="currsymbol">unpacked</span>
<script>explorer.outline.addDecl('unpacked');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Forwards to deserialized object.
<br><br>
<b>Returns:</b><br>
the <b>Unpacked</b>
 object contains deserialized value.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="StreamingUnpacker.clear"></a>nothrow @safe void 
<span class="currsymbol">clear</span>
<script>explorer.outline.addDecl('clear');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Clears some states for next deserialization.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="StreamingUnpacker.purge"></a>@safe Unpacked 
<span class="currsymbol">purge</span>
<script>explorer.outline.addDecl('purge');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Convenient method for unpacking and clearing states.
<br><br>
<b>Example:</b><br>
<pre class="d_code"><font color=blue>foreach</font> (obj; unpacker.<u>purge</u>()) {
    <font color=green>// do stuff
</font>}
</pre>
 is equivalent to
<pre class="d_code"><font color=blue>foreach</font> (obj; unpacker.unpacked) {
    <font color=green>// do stuff
</font>}
unpacker.clear();
</pre>

<br><br>
<b>Returns:</b><br>
the <b>Unpacked</b>
 object contains deserialized value.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="StreamingUnpacker.execute"></a>@trusted bool 
<span class="currsymbol">execute</span>
<script>explorer.outline.addDecl('execute');</script>

();
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>Executes deserialization.
<br><br>
<b>Returns:</b><br>
<b>true</b> if deserialization has been completed, otherwise <b>false</b>.

<br><br>
<b>Throws:</b><br>
<b>UnpackException</b>
 when parse error occurs.<br><br>

</dd>

<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><a name="StreamingUnpacker.opApply"></a>@trusted int 
<span class="currsymbol">opApply</span>
<script>explorer.outline.addDecl('opApply');</script>

(scope int delegate(ref Unpacked) <span class="funcparam">dg</span>);
</span></dt>
<script>explorer.outline.writeEnabled = false;</script>


<dd>supports foreach. One loop provides <b>Unpacked</b>
 object contains execute() result.
 This is convenient in case that <b>MessagePack</b>
 values are continuous.<br><br>

</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>
</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
			Page was generated with
			<img src="candydoc/img/candydoc.gif" style="vertical-align:middle; position:relative; top:-1px">
			on Mon Feb 10 01:12:09 2014

		</td></tr>
	</table>
</div>
<script>
explorer.packageExplorer.addModule("msgpack.buffer");
explorer.packageExplorer.addModule("msgpack.common");
explorer.packageExplorer.addModule("msgpack.msgpack");
explorer.packageExplorer.addModule("msgpack.object");
explorer.packageExplorer.addModule("msgpack.packer");
explorer.packageExplorer.addModule("msgpack.unpacker");
explorer.packageExplorer.addModule("msgpack.util");</script>
</body></html>


